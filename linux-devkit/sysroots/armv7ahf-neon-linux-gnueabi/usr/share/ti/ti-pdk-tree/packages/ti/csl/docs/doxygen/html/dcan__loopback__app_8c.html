<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>dcan_loopback_app.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="../../tilogo.gif"></a></td>
  <td bgcolor="red"><img src="../../titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_cfafba98a580ce4b62f8a6fa96d7cbb0.html">example</a></li><li class="navelem"><a class="el" href="dir_65c5ae171752395ae623586383a19d13.html">dcan</a></li><li class="navelem"><a class="el" href="dir_c6dc4952148e47a6845fd013c6b7ca47.html">dcanLoopback</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dcan_loopback_app.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains core test of DCAN external loopback test mode.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="dcan__loopback__app_8h.html">dcan_loopback_app.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7b69ebbb35311ff41266603fa99f151c"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#a7b69ebbb35311ff41266603fa99f151c">DCANAppBitTimeCalculator</a> (<a class="el" href="dcan__loopback__app_8h.html#a32e134932ceff0265e1f23575cfb4f0c">dcanBitTimeParamsLocal_t</a> *pBitTimeParam, uint32_t clkFreq)</td></tr>
<tr class="memdesc:a7b69ebbb35311ff41266603fa99f151c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will calculate the bit-timing parameters for the DCAN controller based on the input frequency and required bit-rate on the CAN bus.  <a href="#a7b69ebbb35311ff41266603fa99f151c">More...</a><br /></td></tr>
<tr class="separator:a7b69ebbb35311ff41266603fa99f151c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abedec26e790aebf2371dd51d73b0e018"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#abedec26e790aebf2371dd51d73b0e018">DCANAppUpdateSamplePnt</a> (<a class="el" href="dcan__loopback__app_8h.html#a32e134932ceff0265e1f23575cfb4f0c">dcanBitTimeParamsLocal_t</a> *pBitTimeParam, int32_t samplePnt, int32_t tseg, int32_t *tseg1, int32_t *tseg2)</td></tr>
<tr class="memdesc:abedec26e790aebf2371dd51d73b0e018"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will update the sampling point based on CAN time segment values.  <a href="#abedec26e790aebf2371dd51d73b0e018">More...</a><br /></td></tr>
<tr class="separator:abedec26e790aebf2371dd51d73b0e018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3588eaa87481204b96853420589d8a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f3588eaa87481204b96853420589d8a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#a9f3588eaa87481204b96853420589d8a">DCANAppConfigIntr</a> (void)</td></tr>
<tr class="memdesc:a9f3588eaa87481204b96853420589d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the DCAN interrupts to interrupt controller. <br /></td></tr>
<tr class="separator:a9f3588eaa87481204b96853420589d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9cc64ed836eb5785dea53a934c023e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9cc64ed836eb5785dea53a934c023e6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#ac9cc64ed836eb5785dea53a934c023e6">uartInit</a> ()</td></tr>
<tr class="memdesc:ac9cc64ed836eb5785dea53a934c023e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes UART with the required UART parameters. <br /></td></tr>
<tr class="separator:ac9cc64ed836eb5785dea53a934c023e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fe85ace69659474c399788cc687512"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa2fe85ace69659474c399788cc687512"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#aa2fe85ace69659474c399788cc687512">padConfig_prcmEnable</a> ()</td></tr>
<tr class="memdesc:aa2fe85ace69659474c399788cc687512"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board and UART configuration initialization function. <br /></td></tr>
<tr class="separator:aa2fe85ace69659474c399788cc687512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30fb366a5305f457fd5957f5f0145db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad30fb366a5305f457fd5957f5f0145db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#ad30fb366a5305f457fd5957f5f0145db">DCAN1Prcm_clck_ram</a> ()</td></tr>
<tr class="memdesc:ad30fb366a5305f457fd5957f5f0145db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock configuration and Pin muxing function for DCAN instance1. <br /></td></tr>
<tr class="separator:ad30fb366a5305f457fd5957f5f0145db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85ea882cec156990e8b55b8ef3375da"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab85ea882cec156990e8b55b8ef3375da"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#ab85ea882cec156990e8b55b8ef3375da">DCAN2Prcm_clck_ram</a> ()</td></tr>
<tr class="memdesc:ab85ea882cec156990e8b55b8ef3375da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock configuration and Pin muxing function for DCAN instance2. <br /></td></tr>
<tr class="separator:ab85ea882cec156990e8b55b8ef3375da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2852f2a4a5393d5222e1024e17d69b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#ad2852f2a4a5393d5222e1024e17d69b4">DCANAppInitParams</a> (<a class="el" href="group___c_s_l___d_c_a_n.html#gaf53cf76dbdfd5a038b37957a87c6d088">dcanCfgParams_t</a> *pDcanCfgPrms, <a class="el" href="group___c_s_l___d_c_a_n.html#ga893db756e22742a202e9cfde9921f7c9">dcanMsgObjCfgParams_t</a> *pDcanTxCfgPrms, <a class="el" href="group___c_s_l___d_c_a_n.html#ga893db756e22742a202e9cfde9921f7c9">dcanMsgObjCfgParams_t</a> *pDcanRxCfgPrms, <a class="el" href="structdcan_msg_params.html">dcanTxParams_t</a> *pDcanTxPrms, char pMainMenuOption)</td></tr>
<tr class="memdesc:ad2852f2a4a5393d5222e1024e17d69b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">DCAN IP configuration initialization function.  <a href="#ad2852f2a4a5393d5222e1024e17d69b4">More...</a><br /></td></tr>
<tr class="separator:ad2852f2a4a5393d5222e1024e17d69b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dcb8f184941abdb06ea31a5759c85cc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#a0dcb8f184941abdb06ea31a5759c85cc">DCANCalculateBitTimeParams</a> (uint32_t clkFreq, uint32_t bitRate, <a class="el" href="group___c_s_l___d_c_a_n.html#ga1b3d9ee52584df687ac47a90cd4d315c">dcanBitTimeParams_t</a> *pBitTimePrms)</td></tr>
<tr class="memdesc:a0dcb8f184941abdb06ea31a5759c85cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes I/P Clk frequency, required bit-rate on the CAN bus and calculates the value to be programmed for DCAN BTR register. This API doesn't do the actual programming. This is intended to be used as a utility function. And the application should call the <a class="el" href="group___c_s_l___d_c_a_n.html#gabfcc29f4c2f9ea86247dd5796ec6b2c0" title="This API configures bit time parameters for DCAN module. ">DCANSetBitTime</a> function to do the actual programming.  <a href="#a0dcb8f184941abdb06ea31a5759c85cc">More...</a><br /></td></tr>
<tr class="separator:a0dcb8f184941abdb06ea31a5759c85cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949a44b111735f03b00c38b34ee2ee4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#a949a44b111735f03b00c38b34ee2ee4a">DCANAppWaitForIfReg</a> (uint32_t baseAddr, uint32_t ifRegNum)</td></tr>
<tr class="memdesc:a949a44b111735f03b00c38b34ee2ee4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This Function checks if DCAN IF Register is busy.  <a href="#a949a44b111735f03b00c38b34ee2ee4a">More...</a><br /></td></tr>
<tr class="separator:a949a44b111735f03b00c38b34ee2ee4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f654f19993f0d8e7b7a69020a0c977"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#aa4f654f19993f0d8e7b7a69020a0c977">mainMenu</a> (char *option)</td></tr>
<tr class="memdesc:aa4f654f19993f0d8e7b7a69020a0c977"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function displays the menu options and gets the user input to select DCAN instance1 or DCAN instance2.  <a href="#aa4f654f19993f0d8e7b7a69020a0c977">More...</a><br /></td></tr>
<tr class="separator:aa4f654f19993f0d8e7b7a69020a0c977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289c60565b0b0612957a3cd772439e03"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#a289c60565b0b0612957a3cd772439e03">execTest</a> (void)</td></tr>
<tr class="memdesc:a289c60565b0b0612957a3cd772439e03"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function executes the DCAN Loopback and DCAN ParityEcc Test functions.  <a href="#a289c60565b0b0612957a3cd772439e03">More...</a><br /></td></tr>
<tr class="separator:a289c60565b0b0612957a3cd772439e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b3a276ac9aa6c63d20bbf71a1e4bfb"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#a28b3a276ac9aa6c63d20bbf71a1e4bfb">dcanReceiveData</a> (uint32_t msgLstErrCnt, uint32_t dataMissMatchErrCnt)</td></tr>
<tr class="memdesc:a28b3a276ac9aa6c63d20bbf71a1e4bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function retrieves Data from the message object and validates the received data.  <a href="#a28b3a276ac9aa6c63d20bbf71a1e4bfb">More...</a><br /></td></tr>
<tr class="separator:a28b3a276ac9aa6c63d20bbf71a1e4bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034a8c0bab88b35ce4e389a2842cdae1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcan__loopback__app_8c.html#a034a8c0bab88b35ce4e389a2842cdae1">dcanLoopbackTest</a> (void)</td></tr>
<tr class="memdesc:a034a8c0bab88b35ce4e389a2842cdae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">DCAN Loopback Test Function.  <a href="#a034a8c0bab88b35ce4e389a2842cdae1">More...</a><br /></td></tr>
<tr class="separator:a034a8c0bab88b35ce4e389a2842cdae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains core test of DCAN external loopback test mode. </p>
<p>DCAN external loopback which tests the internal feedback from Tx output to Rx input. Transmitted messages are treated as received messages and can be stored into message objects if they pass acceptance filtering. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7b69ebbb35311ff41266603fa99f151c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t DCANAppBitTimeCalculator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dcan__loopback__app_8h.html#a32e134932ceff0265e1f23575cfb4f0c">dcanBitTimeParamsLocal_t</a> *&#160;</td>
          <td class="paramname"><em>pBitTimeParam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>clkFreq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will calculate the bit-timing parameters for the DCAN controller based on the input frequency and required bit-rate on the CAN bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBitTimeParam</td><td>Pointer to dcanBitTimeParams_t structure. </td></tr>
    <tr><td class="paramname">clkFreq</td><td>Clock frequency to DCAN controller in MHz.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the error value if error is present. </dd></dl>

</div>
</div>
<a class="anchor" id="ad2852f2a4a5393d5222e1024e17d69b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DCANAppInitParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___d_c_a_n.html#gaf53cf76dbdfd5a038b37957a87c6d088">dcanCfgParams_t</a> *&#160;</td>
          <td class="paramname"><em>pDcanCfgPrms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___d_c_a_n.html#ga893db756e22742a202e9cfde9921f7c9">dcanMsgObjCfgParams_t</a> *&#160;</td>
          <td class="paramname"><em>pDcanTxCfgPrms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___d_c_a_n.html#ga893db756e22742a202e9cfde9921f7c9">dcanMsgObjCfgParams_t</a> *&#160;</td>
          <td class="paramname"><em>pDcanRxCfgPrms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdcan_msg_params.html">dcanTxParams_t</a> *&#160;</td>
          <td class="paramname"><em>pDcanTxPrms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>menuOption</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DCAN IP configuration initialization function. </p>
<p>This function configures the DCAN controller with the user selected DCAN instance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pDcanCfgPrms</td><td>Pointer to the DCAN configuration object. </td></tr>
    <tr><td class="paramname">pDcanTxCfgPrms</td><td>Pointer to the DCAN Tx configuration object. </td></tr>
    <tr><td class="paramname">pDcanRxCfgPrms</td><td>Pointer to the DCAN Rx configuration object. </td></tr>
    <tr><td class="paramname">menuOption</td><td>Points to the User option </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abedec26e790aebf2371dd51d73b0e018"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t DCANAppUpdateSamplePnt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dcan__loopback__app_8h.html#a32e134932ceff0265e1f23575cfb4f0c">dcanBitTimeParamsLocal_t</a> *&#160;</td>
          <td class="paramname"><em>pBitTimeParam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>samplePnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>tseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>tseg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>tseg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will update the sampling point based on CAN time segment values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBitTimeParam</td><td>Pointer to dcanBitTimeParams_t structure. </td></tr>
    <tr><td class="paramname">samplePnt</td><td>Sample point value. </td></tr>
    <tr><td class="paramname">tseg</td><td>Time segment value. </td></tr>
    <tr><td class="paramname">tseg1</td><td>Pointer to store time segment 1 value. </td></tr>
    <tr><td class="paramname">tseg2</td><td>Pointer to store time segment 2 value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the updated sample point value. </dd></dl>

</div>
</div>
<a class="anchor" id="a949a44b111735f03b00c38b34ee2ee4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DCANAppWaitForIfReg </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baseAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ifRegNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This Function checks if DCAN IF Register is busy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddr</td><td>Base Address of the DCAN module register </td></tr>
    <tr><td class="paramname">ifRegNum</td><td>DCAN interface register number For valid values refer enum <a class="el" href="group___c_s_l___d_c_a_n.html#gaf391d89903698aeeefb06905c339bf41" title="Enumerates the values used to represent the DCAN interface registers. ">dcanIfRegNum_t</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0dcb8f184941abdb06ea31a5759c85cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t DCANCalculateBitTimeParams </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>clkFreq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bitRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___d_c_a_n.html#ga1b3d9ee52584df687ac47a90cd4d315c">dcanBitTimeParams_t</a> *&#160;</td>
          <td class="paramname"><em>pBitTimePrms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function takes I/P Clk frequency, required bit-rate on the CAN bus and calculates the value to be programmed for DCAN BTR register. This API doesn't do the actual programming. This is intended to be used as a utility function. And the application should call the <a class="el" href="group___c_s_l___d_c_a_n.html#gabfcc29f4c2f9ea86247dd5796ec6b2c0" title="This API configures bit time parameters for DCAN module. ">DCANSetBitTime</a> function to do the actual programming. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clkFreq</td><td>I/P clock frequency to DCAN controller in Hz. </td></tr>
    <tr><td class="paramname">bitRate</td><td>Required bit-rate on the CAN bus in bits per second. </td></tr>
    <tr><td class="paramname">pBitTimePrms</td><td>Pointer to params where the calculated register fields are populated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns Bit Time calculation error For valid values refer enum <a class="el" href="dcan__loopback__app_8h.html#a5b4ca4dcbab7bc6a4f21469aada5778a" title="Enumerates the values used to represent the DCAN bit time calculation error values. ">dcanBitTimeCalcErrType_t</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a034a8c0bab88b35ce4e389a2842cdae1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t dcanLoopbackTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DCAN Loopback Test Function. </p>
<dl class="section return"><dt>Returns</dt><dd>STW_SOK DCAN Loopback Test Success </dd>
<dd>
STW_EFAIL DCAN Loopback Test Failed </dd></dl>

</div>
</div>
<a class="anchor" id="a28b3a276ac9aa6c63d20bbf71a1e4bfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t dcanReceiveData </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>msgLstErrCnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dataMissMatchErrCnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function retrieves Data from the message object and validates the received data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msgLstErrCnt</td><td>Received message is Valid or not Valid values: TRUE or FALSE </td></tr>
    <tr><td class="paramname">dataMissMatchErrCnt</td><td>Data miss-match count </td></tr>
    <tr><td class="paramname">buffIndex</td><td>Message Object Number to store the received data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>STW_SOK Receive Data Success </dd>
<dd>
STW_EFAIL Receive Data Failed </dd></dl>

</div>
</div>
<a class="anchor" id="a289c60565b0b0612957a3cd772439e03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t execTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function executes the DCAN Loopback and DCAN ParityEcc Test functions. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns STW_SOK on Success </dd>
<dd>
Returns Error Value on Failure </dd></dl>

</div>
</div>
<a class="anchor" id="aa4f654f19993f0d8e7b7a69020a0c977"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mainMenu </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>option</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function displays the menu options and gets the user input to select DCAN instance1 or DCAN instance2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">option</td><td>User option selected DCAN1 or DCAN2 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
