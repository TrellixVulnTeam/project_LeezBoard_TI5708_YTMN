<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IMGLIB: IMG_mad_16x16</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>IMG_mad_16x16</h1><hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_g__mad__16x16.html#g66b90731a99c47d70f5aa90b0079889f">IMG_mad_16x16</a> (const unsigned char *restrict refImg, const unsigned char *restrict srcImg, int pitch, int h, int v, unsigned *restrict match)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g66b90731a99c47d70f5aa90b0079889f"></a><!-- doxytag: member="c66/IMG_mad_16x16.h::IMG_mad_16x16" ref="g66b90731a99c47d70f5aa90b0079889f" args="(const unsigned char *restrict refImg, const unsigned char *restrict srcImg, int pitch, int h, int v, unsigned *restrict match)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMG_mad_16x16           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *restrict&nbsp;</td>
          <td class="paramname"> <em>refImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *restrict&nbsp;</td>
          <td class="paramname"> <em>srcImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *restrict&nbsp;</td>
          <td class="paramname"> <em>match</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description:</b></dt><dd>This routine returns the location of the minimum absolute difference between a 16x16 search block and some block in a (h + 16) x (v + 16) search area. h and v are the sizes of the search space for the top left coordinate of the search block. refImg points to the top left pixel of the search area. <div class="fragment"><pre class="fragment">
  
            (0,0)          (h,0)      (h+16,0)                             
              ;--------------+--------;                                    
              ;    search    |        ;                                    
              ;    space     |        ;                                    
              ;              |        ;        search area                 
              ;--------------+        ;        within reference image      
            (0,v)          (h,v)      ;                                    
              ;                       ;                                    
              ;-----------------------;                                    
            (0, v+16)                 (v+16,h+16)                          
   </pre></div></dd></dl>
The location is returned relative to the above coordinate system as x and y packed in two 16-bit quantities in a 32-bit word: <div class="fragment"><pre class="fragment">
                  31             16 15             0                      
                  +----------------+----------------+                     
        match[0]:  |       x        |       y        |                     
                  +----------------+----------------+                     
                                                                          
                  31                               0                      
                  +---------------------------------+                     
        match[1]:  |   SAD value at location x, y    |                     
                  +---------------------------------+                     
   </pre></div><p>
<dl class="user" compact><dt><b></b></dt><dd></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>refImg</em>&nbsp;</td><td>Reference image </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>srcImg</em>&nbsp;</td><td>16x16 block image to look for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pitch</em>&nbsp;</td><td>Width of reference image </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>Horizontal size of search area </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>v</em>&nbsp;</td><td>Vertical size of search area (must be a multiple of 2) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>match</em>&nbsp;</td><td>Result: match[0] is packed x, y match[1] is MAD value</td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b>Assumptions:</b></dt><dd><ul>
<li>srcImg and refImg do not alias in memory</li><li>The routine is written for Little Endian configuration</li><li>Two MADS are performed together and hence it is assumed that the vertical dimension is a multiple of 2</li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Implementation Notes:</b></dt><dd>The two outer loops are merged, the two inner loops are merged. The inner loop process 2 lines of 2 search locations in parallel. The search is performed in top-to-bottom, left-to-right order, with the earliest match taking precedence in the case of ties. Further use is made of C64x specific instructions such as SUBABS4 and DOTPU4. The SUBABS4 takes the absolute difference on four 8 bit quantities packed into a 32 bit word. The DOTPU4 performs four 8 bit wide multiplies and adds the results together. </dd></dl>
<dl class="user" compact><dt><b></b></dt><dd><ul>
<li>This code is fully interruptible and fully reentrant</li><li>This code is compatible with C66x processors (though not optimized)</li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Benchmarks:</b></dt><dd>See IMGLIB_Test_Report.html for cycle and memory information. </dd></dl>

</div>
</div><p>
<hr size="1"><small>
Copyright  2012, Texas Instruments Incorporated</small>
</body>
</html>
